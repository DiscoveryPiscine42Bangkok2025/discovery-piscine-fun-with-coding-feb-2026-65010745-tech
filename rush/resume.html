<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Resume - Piscine Discovery</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <link rel="stylesheet" href="style.css">
</head>

<body data-bs-spy="scroll" data-bs-target="#icon-nav">

    <nav id="icon-nav" class="icon-nav-group">
        <a class="nav-link-icon" href="index.html" title="Home"><i class="bi bi-house"></i></a>
        <a class="nav-link-icon" href="#part1" title="Profile"><i class="bi bi-person"></i></a>
        <a class="nav-link-icon" href="#part2" title="Skills"><i class="bi bi-gear"></i></a>
        <a class="nav-link-icon" href="#part3" title="Contact"><i class="bi bi-chat-left-dots"></i></a>
    </nav>

    <div class="container">
        <section id="part1">
            <div class="glass-card text-center w-100">
                <img id="photo" src="" alt="Profile" class="profile-photo">
                <h1 id="name" class="display-2 fw-bold mb-1"></h1>
                <h2 id="job" class="text-primary h3 mb-4"></h2>
                <p id="intro" class="lead text-muted mx-auto" style="max-width: 700px;"></p>
            </div>
        </section>
    </div>

    <script>
        async function loadResume() {
            const params = new URLSearchParams(window.location.search);
            const user = params.get('user') || '1';

            try {
                const response = await fetch(`resume${user}.json`);
                if (!response.ok) throw new Error("Data not found");
                const data = await response.json();

                document.getElementById('name').innerText = data.profile.name;
                document.getElementById('job').innerText = data.profile.job_title;
                document.getElementById('intro').innerText = data.profile.introduction || "Welcome to my portfolio.";
                document.getElementById('photo').src = data.profile.photo_url;
                document.getElementById('experience').innerText = data.experience_skills.experience;

                const skillsDiv = document.getElementById('skills-list');
                data.experience_skills.skills.forEach(skill => {
                    const span = document.createElement('span');
                    span.className = 'badge-skill';
                    span.innerText = skill;
                    skillsDiv.appendChild(span);
                });

                const contactDiv = document.getElementById('contact-links');
                for (const [key, value] of Object.entries(data.contact)) {
                    contactDiv.innerHTML += `
                        <div class="contact-item">
                            <div class="small text-uppercase fw-bold text-primary">${key}</div>
                            <div class="fs-4 fw-medium">${value}</div>
                        </div>`;
                }
            } catch (err) {
                console.error(err);
                document.body.innerHTML = "<div class='text-center mt-5'><h1>Please run 'python3 -m http.server 8080'</h1></div>";
            }
        }
        window.onload = loadResume;
    </script>
</body>

</html>